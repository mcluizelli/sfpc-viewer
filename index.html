<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>jQuery UI Tabs - Default functionality</title>

  <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
  
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="D3-tip.js" charset="utf-8"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js" charset="utf-8"></script>

  <script>
    $(function() {
      $( "#tabs" ).tabs();
    });
    $(function(){
      $("#tabs-2").load("tab2.html"); 
    });
  </script>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="style.css">
</head>
 
<body>

  <div id="col1" class="col-md-4">
    
    <div id="tabs">
      <ul class="nav nav-tabs" role="tablist">
        <li><a href="#tabs-2">SFC Requests</a></li>
        <li><a href="#tabs-3">Physical Topology</a></li>
        <li><a href="#tabs-4">Network Functions</a></li>
        <li><a href="#tabs-1">Parameters</a></li>
        <li><a href="#tabs-5">Filters</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane" id="tabs-1">
            <div class="panel-body">
                    <div class="form-group">
                        <label for="topology">Topology size</label>
                        <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Topology size">
                    </div>

                    <div class="form-group">
                        <label for="topology">Topology size</label>
                        <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Topology size">
                    </div>

            </div>
        </div>
        
        <div class="tab-pane" id="tabs-2">
        </div>


        <div class="tab-pane" id="tabs-3">
          
            <div class="form-group">
              <input type="number" class="form-control input-sm" min="1" id="numNodes" placeholder="Nodes">
              <input type="number" class="form-control input-sm " min="0" id="numLinks" placeholder="Links">
            </div>
            <button type="submit" class="btn btn-primary" onClick="addInputs()">Generate</button>
          <form role="form" class="form-inline">
            <div id="nodesContainer" class="form-group"></div>
            <div id="linksContainer" class="form-group"></div>
          </form>
          <button type="submit" class="btn btn-primary" onClick="updateGraph()">Update Nodes</button>
        </div>

        <div class="tab-pane" id="tabs-4">
          <br>
          <table class="table table-hover" id="nf-table">
            <tr class="active">
              <td><b>ID</b></td>
              <td><b>Network Function</b></td>
              <td><b>CPU</b></td>
              <td><b>Memory</b></td>
              <td><b>Number of Instances</b></td>
              <td></td>
            </tr>

          </table>
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal1" data-whatever="@mdo">Add NF</button>
          <button type="button" class="btn btn-danger" id="btClear">Clear</button>
          
          <div class="modal fade" id="modal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title" id="exampleModalLabel">Add Network Function Instances</h4>
                </div>
                <div class="modal-body">
                  <form>
                    <div class="form-group">
                      <label for="nf-id" class="control-label">Network Function ID:</label>
                      <input type="text" class="form-control" id="nf-id" placeholder="For example: 1" >
                      <label for="nf-name" class="control-label">Network Function Description:</label>
                      <input type="text" class="form-control" id="nf-name" placeholder="For example: Firewall">
                    </div>
                    <div class="form-group">
                      <label for="cpu-nf" class="control-label">CPU:</label>
                      <input type="text" class="form-control" id="cpu-nf" placeholder="For example: 100">
                      <label for="mem-nf" class="control-label">Memory (MB):</label>
                      <input type="text" class="form-control" id="mem-nf" placeholder="For example: 256">
                      <label for="inst-nf" class="control-label">Number of Instances:</label>
                      <input type="text" class="form-control" id="inst-nf" placeholder="For example: 10">
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                  <button type="button" class="btn btn-primary" id="btAdd">Add</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <script>
            $('#btAdd').on('click', function(){
              var table = document.getElementById('nf-table');
              var row = table.insertRow(1);
              var cellID = row.insertCell(0);
              var cellNF = row.insertCell(1);
              var cellMEM = row.insertCell(2);
              var cellCPU = row.insertCell(3);
              var cellINST = row.insertCell(4);
              var cellBTN = row.insertCell(5);

              cellID.innerHTML = document.getElementById('nf-id').value;
              cellNF.innerHTML = document.getElementById('nf-name').value;
              cellMEM.innerHTML = document.getElementById('mem-nf').value;
              cellCPU.innerHTML = document.getElementById('cpu-nf').value;
              cellINST.innerHTML = document.getElementById('inst-nf').value;

              cellBTN.innerHTML = "<center><button type='button' class='btn btn-danger btn-xs' id='removeID' onClick='$(this).parent().parent().parent().remove()'>Remove</button> <button type='button' class='btn btn-default btn-xs' data-toggle=modal' data-target='#modal1' data-whatever='@mdo'>Edit</button></center>";
              
            })

            $('#btClear').on('click', function(){
              $('#nf-table tr:not(:first)').remove();
            })    
          </script>


        <div class="tab-pane" id="tabs-5">
          <label>.dat</label><input type='file' id='fileInputDat'>
          <label>.out</label><input type='file' id='fileInputOut'>
          <div id="filtersMenu"></div>
        </div>

      </div>
   </div>
      
   

  <ul class="pager">
      <li><a href="#">Previous</a></li>
      <li><a href="#">Next</a></li>
  </ul>
  <center>
  <button type="button" class="btn btn-primary" id="addNode" onClick="start()">Solve</button>
  </center>

  </div>

  <div id="col2" class="col-md-7">
      <div id="graph"></div>
  </div>  




  <script src="fileLoader.js"></script>
  <script src="filters.js"></script>
  <script src="tooltip.js"></script>
  <script src="d3graph.js"></script>

  <script type="text/javascript">
    function addNode() {
      var newId = $('#nodesContainer').children().length;
      var label = $("<label/>", {
        html: "Node " + newId
      });
      var input = $("<input/>", {
        name: "capacity",
        type: "text",
        class: "form-control input-sm",
        placeholder: "capacity"
      });
      var radioOption = $("<input/>", {
        type:"radio",
        name:"nodeType"+newId
      }).click(function() {
        $("#nwfunctionOptions"+newId).hide();
        $("#endpointOptions"+newId).show();
      });
      var radioOption2 = radioOption.clone()
        .click(function() {
          $("#nwfunctionOptions"+newId).show();
          $("#endpointOptions"+newId).hide();
        });

      var radio = $("<div/>", {class:"radio"});
      radio.append($("<label/>", {html:"Virtual node "}).append(radioOption));
      radio.append($("<label/>", {html:"Network function "}).append(radioOption2.attr("checked","true")));
      var nwfunctionOptions = $("<div/>", {id:"nwfunctionOptions"+newId})
        .append(input.clone().attr("name","type").attr("placeholder","type"))
        .append(input.clone().attr("name","cpu").attr("placeholder","cpu"))
        .append(input.clone().attr("name","memory").attr("placeholder","memory"));

      var endpointOptions =  $("<div/>", {id:"endpointOptions"+newId})
        .append(input.clone().attr("name","position").attr("placeholder","position"))
        .hide();
      /*
      <div class="dropdown">
        <button id="dLabel" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Dropdown trigger
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
          ...
        </ul>
      </div>
      */
      var div = $("<div/>", {
        id: "node"+newId
      }).append(label)
        .append(radio)
        .append(nwfunctionOptions)
        .append(endpointOptions)
        .appendTo("#nodesContainer");
    }

    function addLink() {
      var input = $("<input/>", {type:"number", class:"form-control input-sm"});
      var div = $("<div/>")
      div.append($("<label/>").html("Source ").append(input.clone().attr("id", "linkSource")))
        .append($("<label/>").html("Target ").append(input.clone().attr("id", "linkTarget")))
        .append($("<label/>").html("Capacity ").append(input.clone().attr("id", "linkCapacity")))
        .appendTo("#linksContainer");

    }
    function addInputs() {
      var nodesContainer = document.getElementById("nodesContainer");
      var linksContainer = document.getElementById("linksContainer");
      var nodes = document.getElementById("numNodes").value;
      var links = document.getElementById("numLinks").value;
      // removing forms generated previously
      while (nodesContainer.hasChildNodes()) {
          nodesContainer.removeChild(nodesContainer.lastChild);
      }
      while (linksContainer.hasChildNodes()) {
          linksContainer.removeChild(linksContainer.lastChild);
      }
      for(i=0;i<nodes;i++) { 
        addNode();
      }
      
      for(i=0;i<links;i++) {
        var div = document.createElement("div");
        var input = document.createElement("input");
        div.id = "link"+i;
        input.type = "text";
        input.className = "form-control input-sm";
        var name = "source";
        //input.value = name;
        input.placeholder = name;
        input.name = name;
        div.appendChild(input);
        var input = document.createElement("input");
        input.type = "text";
        input.className = "form-control input-sm";
        name = "destiny";
        //input.value = name;
        input.placeholder = name;
        input.name = name;
        div.appendChild(input);
        var input = document.createElement("input");
        input.type = "text";
        input.className = "form-control input-sm";
        name = "capacity";
        //input.value = name;
        input.placeholder = name;
        input.name = name;
        div.appendChild(input);
        linksContainer.appendChild(div);
      }
      
    }
  </script>
  </body>
</html>